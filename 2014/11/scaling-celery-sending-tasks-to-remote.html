<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Scaling Celery - Sending Tasks To Remote Machines | Avil Page</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<!-- <link href="/assets/css/rst_base.css" rel="stylesheet" type="text/css"> --><link href="../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/style.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/carbon.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://avilpage.com/2014/11/scaling-celery-sending-tasks-to-remote.html">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Chillar Anand">
<link rel="prev" href="pandoc-best-way-to-convert-markdown-to.html" title="Pandoc: Best Way To Convert Markdown to reStructuredText!" type="text/html">
<link rel="next" href="python-converting-string-type-objects.html" title="[Python] Converting String Type Objects To Correct Types!" type="text/html">
<meta property="og:site_name" content="Avil Page">
<meta property="og:title" content="Scaling Celery - Sending Tasks To Remote Machines">
<meta property="og:url" content="http://avilpage.com/2014/11/scaling-celery-sending-tasks-to-remote.html">
<meta property="og:description" content="Celery:

    
    Celery is a Python package which implements a task queue mechanism with a foucs on real-time processing, while also supporting task scheduling.
    

    
    It has 3 main component">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-11-09T14:05:00+05:30">
<meta property="article:tag" content="celery">
<meta property="article:tag" content="django">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://avilpage.com/">

                <span id="blog-title">Avil Page</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../">Articles</a>
                </li>
<li>
<a href="../../p/talks.html">Talks</a>
                </li>
<li>
<a href="../../p/projects.html">Projects</a>
                </li>
<li>
<a href="../../p/about.html">About</a>
                </li>
<li>
<a href="../../rss.xml">RSS</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
            <a href="scaling-celery-sending-tasks-to-remote.src.html" id="sourcelink">Source</a>
        </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content col-lg-6 col-lg-offset-3 col-xs-12 col-md-12">
        <!--Body content-->
        <div class="row">
            
    <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Scaling Celery - Sending Tasks To Remote Machines</a></h1>

        <div class="metadata">
            <p class="dateline">
                <time class="published dt-published" datetime="2014-11-09T14:05:00+05:30" itemprop="datePublished" title="09 Nov 14">09 Nov 2014</time></p>
            |
            

        10+ min read


        </div>
        
    </header><hr>
<div class="e-content entry-content" itemprop="articleBody text">
            <div dir="ltr" style="text-align: left;" trbidi="on">
    <h4 style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 1.25em; line-height: 1.4; margin-bottom: 16px; margin-top: 1em; position: relative;">
    Celery:</h4>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    Celery is a Python package which implements a task queue mechanism with a foucs on real-time processing, while also supporting task scheduling.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    It has 3 main components.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <strong style="box-sizing: border-box;">Celery Application(or Client):</strong> It is responsible for adding tasks to the queue.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <strong style="box-sizing: border-box;">Celery Worker(or Server):</strong> It is responsible for executing the tasks given to it.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <strong style="box-sizing: border-box;">Broker:</strong> It is responsible for transporting messages between client and server.
    </div>

    <h4 style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 1.25em; line-height: 1.4; margin-bottom: 16px; margin-top: 1em; position: relative;">
    <a aria-hidden="true" class="anchor" href="http://localhost:6419/#what-you-should-know" id="user-content-what-you-should-know" style="box-sizing: border-box; color: #4078c0; cursor: pointer; display: block; left: 0px; line-height: 1.2; margin-left: -30px; padding-left: 30px; padding-right: 6px; position: absolute; text-decoration: none; top: 0px;" name="user-content-what-you-should-know"></a>What You Should Know:</h4>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    You should know basics of Celery and you should be familiar with
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    creating celery tasks
    </div>

    <div class="highlight highlight-source-python" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">from</span> celery <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> Celery<br><br>app <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> Celery(<span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>tasks<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-v" style="box-sizing: border-box; color: #ed6a43;">backend</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span><span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>amqp<span class="pl-pds" style="box-sizing: border-box;">'</span></span>,<br><span class="pl-v" style="box-sizing: border-box; color: #ed6a43;">broker</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span><span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>amqp://&lt;user&gt;:&lt;password&gt;@&lt;ip&gt;/&lt;vhost&gt;<span class="pl-pds" style="box-sizing: border-box;">'</span></span>)<br><br><span class="pl-en" style="box-sizing: border-box; color: #795da3;">@app.task</span><br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">def</span> <span class="pl-en" style="box-sizing: border-box; color: #795da3;">add</span>(<span class="pl-smi" style="box-sizing: border-box;">x</span>, <span class="pl-smi" style="box-sizing: border-box;">y</span>):<br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">return</span> x <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">+</span> y
</pre>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    adding tasks to a queue,
    </div>

    <div class="highlight highlight-source-python" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

add.apply_async(<span class="pl-v" style="box-sizing: border-box; color: #ed6a43;">args</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span>[<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">1</span>,<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">2</span>])
</pre>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    and consuming tasks with a worker
    </div>

    <div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

celery worker -A my_app -l info
</pre>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    If your tasks doesn't need much system resources, you can setup all of them in the same machine. But, if you have a lot of jobs which consume resources,
    then you need to spread them out in several machines.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    In this tutorial lets move our celery workers into a remote machine keeping client and broker in same machine.
    </div>

    <h4 style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 1.25em; line-height: 1.4; margin-bottom: 16px; margin-top: 1em; position: relative;">
    <a aria-hidden="true" class="anchor" href="http://localhost:6419/#sending-tasks-to-another-machine" id="user-content-sending-tasks-to-another-machine" style="box-sizing: border-box; color: #4078c0; cursor: pointer; display: block; left: 0px; line-height: 1.2; margin-left: -30px; padding-left: 30px; padding-right: 6px; position: absolute; text-decoration: none; top: 0px;" name="user-content-sending-tasks-to-another-machine"></a>Sending Tasks To Another Machine:</h4>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <strong style="box-sizing: border-box;">On Machine A:</strong>
    </div>

    <ol style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px; margin-top: 0px; padding: 0px 0px 0px 2em;">
<li style="box-sizing: border-box;">
        <div style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;">
          Install Celery &amp; RabbitMQ.
        </div>
      </li>

      <li style="box-sizing: border-box;">
        <div style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;">
          Configure RabbitMQ so that Machine B can connect to it.
        </div>
      </li>
    </ol>
<div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

<span class="pl-c" style="box-sizing: border-box; color: #969896;"># add new user</span><br>sudo rabbitmqctl add_user <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>user<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span> <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>password<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><br><br><span class="pl-c" style="box-sizing: border-box; color: #969896;"># add new virtual host</span><br>sudo rabbitmqctl add_vhost <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>vhost_name<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><br><br><span class="pl-c" style="box-sizing: border-box; color: #969896;"># set permissions for user on vhost</span><br>sudo rabbitmqctl set_permissions -p <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>vhost_name<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span> <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>user<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span> <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">"</span>.*<span class="pl-pds" style="box-sizing: border-box;">"</span></span> <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">"</span>.*<span class="pl-pds" style="box-sizing: border-box;">"</span></span> <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">"</span>.*<span class="pl-pds" style="box-sizing: border-box;">"</span></span><br><br><span class="pl-c" style="box-sizing: border-box; color: #969896;"># restart rabbit</span><br>sudo rabbitmqctl restart
</pre>
    </div>

    <ol style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px; margin-top: 0px; padding: 0px 0px 0px 2em;">
<li style="box-sizing: border-box;">Create a new file remote.py with a simple task. Here we have broker installed in machine A. So give ip address of
    machine 1 in broker url option.</li>
    </ol>
<div class="highlight highlight-source-python" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">from</span> celery <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> Celery<br><br>app <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> Celery(<span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>tasks<span class="pl-pds" style="box-sizing: border-box;">'</span></span>, <span class="pl-v" style="box-sizing: border-box; color: #ed6a43;">backend</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span><span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>amqp<span class="pl-pds" style="box-sizing: border-box;">'</span></span>,<br><span class="pl-v" style="box-sizing: border-box; color: #ed6a43;">broker</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span><span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>amqp://&lt;user&gt;:&lt;password&gt;@&lt;ip&gt;/&lt;vhost&gt;<span class="pl-pds" style="box-sizing: border-box;">'</span></span>)<br><br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">def</span> <span class="pl-en" style="box-sizing: border-box; color: #795da3;">add</span>(<span class="pl-smi" style="box-sizing: border-box;">x</span>, <span class="pl-smi" style="box-sizing: border-box;">y</span>):<br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">return</span> x <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">+</span> y
</pre>
    </div>

    <ol style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px; margin-top: 0px; padding: 0px 0px 0px 2em;">
<li style="box-sizing: border-box;">Now we have everything setup on machine A. We can now put some tasks in queue.</li>
    </ol>
<div class="highlight highlight-source-python" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

In [<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">1</span>]: <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">from</span> remote <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> add<br><br>In [<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">2</span>]: add.delay(<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">1</span>, <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">2</span>)<br>Out[<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">2</span>]: <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>AsyncResult: <span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">3eb96a11</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span>aa61<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">46d3</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">9b9d</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span>e0e1703438d0<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><br><br>In [<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">3</span>]: b.delay(<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">2</span>, <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">3</span>)<br>Out[<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">3</span>]: <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>AsyncResult: ec40db1a<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span>a43c<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">4486</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">9530</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">0a3153fe1380</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span><br><br>In [<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">4</span>]: b.delay(<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">3</span>, <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">4</span>)<br>Out[<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">4</span>]: <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&lt;</span>AsyncResult: ca53a4c7<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">061b</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">408e</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">82ee</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-ii" style="background-color: #b52a1d; box-sizing: border-box; color: #f8f8f8;">86c2d43d21a0</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">&gt;</span>
</pre>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    Everything is setup on machine A. Now lets get into machine B.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <strong style="box-sizing: border-box;">On Machine B:</strong>
    </div>

    <ol style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px; margin-top: 0px; padding: 0px 0px 0px 2em;">
<li style="box-sizing: border-box;">Install Celery.</li>

      <li style="box-sizing: border-box;">
        <div style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;">
          Copy remote.py file from machine A to this machine.
        </div>
      </li>

      <li style="box-sizing: border-box;">
        <div style="box-sizing: border-box; margin-bottom: 16px; margin-top: 16px;">
          Run a worker to consume the tasks
        </div>
      </li>
    </ol>
<div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

celery worker -l info -A remote
</pre>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    As soon as you launch the worker, you will receive the tasks you queued up and gets executed immediately.
    </div>

    <div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">

[2014-11-09 00:01:19,168: INFO/MainProcess] Received task: remote.add[c2d2bb27-ff5f-47da-b2b9-6fb11669ee1a]<br>[2014-11-09 00:01:19,170: INFO/MainProcess] Received task: remote.add[8daa1a5c-17d0-46dc-9c93-faf7fbeccdd9]<br>[2014-11-09 00:01:19,172: INFO/MainProcess] Received task: remote.add[79603d15-24f1-43f8-b8b7-525b7cd4b9a2]<br>[2014-11-09 00:01:19,401: INFO/MainProcess] Task remote.add[8daa1a5c-17d0-46dc-9c93-faf7fbeccdd9] succeeded <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">in</span> 0.226168102003s: 3<br>[2014-11-09 00:01:19,462: INFO/MainProcess] Task remote.add[c2d2bb27-ff5f-47da-b2b9-6fb11669ee1a] succeeded <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">in</span> 0.286503815001s: 5<br>[2014-11-09 00:01:19,464: INFO/MainProcess] Task remote.add[79603d15-24f1-43f8-b8b7-525b7cd4b9a2] succeeded <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">in</span> 0.288741396998s: 7
</pre>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    This is just a simple guide on how to send tasks to remote machines.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    Depending on your need, you might have to set up a cluster of servers and route tasks accordingly to scale.
    </div>

  </div>

        </div>
        <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/celery.html" rel="tag">celery</a></li>
            <li><a class="tag p-category" href="../../tags/django.html" rel="tag">django</a></li>
            <li><a class="tag p-category" href="../../tags/python.html" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="pandoc-best-way-to-convert-markdown-to.html" rel="prev" title="Pandoc: Best Way To Convert Markdown to reStructuredText!">Previous post</a>
            </li>
            <li class="next">
                <a href="python-converting-string-type-objects.html" rel="next" title="[Python] Converting String Type Objects To Correct Types!">Next post</a>
            </li>
        </ul></nav></aside><div class="full-article-footer">
            <div class="article-footer">

                <div class="avatar-module">
                    <img class="avatar" height="100px" src="../../images/chillaranand.jpg">
</div>

                <p class="avatar-module">
                    Written by
                    <br><b>Chillar Anand</b>
                    <br>
                    Musings about programming, careers &amp; life.
                </p>

            </div>
        </div>

        <hr></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2020         <a href="mailto:">Chillar Anand</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script src="../../assets/js/moment-with-locales.min.js"></script><script src="../../assets/js/fancydates.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
        }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81644162-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-81644162-1');

    $(document.links).filter(function() {
        return this.hostname != window.location.hostname;
    }).attr('target', '_blank');
    </script>
</body>
</html>
