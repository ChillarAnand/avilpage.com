<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Avil Page (Posts about load-testing)</title><link>http://avilpage.com/</link><description></description><atom:link href="http://avilpage.com/tags/load-testing.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><lastBuildDate>Mon, 24 Sep 2018 18:02:24 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>How To Load Testing WebSockets?</title><link>http://avilpage.com/2018/09/guide-to-load-testing-websockets.html</link><dc:creator>Chillar Anand</dc:creator><description>&lt;div&gt;&lt;p&gt;An important part of load testing is finding a right tool that fits our needs. Here are some tools for load testing websockets.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.npmjs.com/package/thor"&gt;thor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.npmjs.com/package/thor"&gt;artillery&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/loadimpact/k6"&gt;k6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Fitblip/wsstat"&gt;wsstat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/M6Web/websocket-bench"&gt;websocket-bench&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/processone/tsung"&gt;tsung&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://jmeter.apache.org/"&gt;Jmeter&lt;/a&gt;(requires plugin)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For this tutorial, we will be using artillery for load testing as it supports quick testing from command line as well as simulating real scenarios from yml config file. It also has inbuilt support for reports.&lt;/p&gt;
&lt;p&gt;Install node &amp;amp; npm on the system with apt package manager.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install -y nodejs npm
&lt;/pre&gt;


&lt;p&gt;Install artillery with npm.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;$ npm install -g artillery
&lt;/pre&gt;


&lt;p&gt;Lets write a simple configuration file to test echo websocket at wss://echo.websocket.com&lt;/p&gt;
&lt;p&gt;Artillery script is composed of two sections: &lt;code&gt;config&lt;/code&gt; and &lt;code&gt;scenarios&lt;/code&gt;. The &lt;code&gt;config&lt;/code&gt; section defines the target, load, environment and other configurations. The &lt;code&gt;scenarios&lt;/code&gt; section contains definitions of test cases that will be executed.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;  config:
    target: "wss://echo.websocket.org"
    phases:
      - duration: 600
        arrivalRate: 100
        name: "Steady users"


  scenarios:
    - engine: "ws"
      flow:
        - send: "hello"
&lt;/pre&gt;


&lt;p&gt;This script will create 100 virtual users every second for 600 seconds. Each virtual user will connect to the socket and send &lt;code&gt;hello&lt;/code&gt; after websocket connection is established.&lt;/p&gt;
&lt;p&gt;Save this script to a file called &lt;code&gt;load.yml&lt;/code&gt; and run it.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;$ artillery run load.yml -o results.json
&lt;/pre&gt;


&lt;p&gt;Once load testing is completed, it will save results to &lt;code&gt;results.json&lt;/code&gt; file. Artillery can convert this json to graphs for visualization. To see a detailed report, run&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;$ artillery report results.json
&lt;/pre&gt;


&lt;p&gt;Here is a sample report generated with artillery.&lt;/p&gt;
&lt;p align="center"&gt;
&lt;img src="http://avilpage.com/images/load-testing-report.png"&gt;
&lt;/p&gt;

&lt;p&gt;For quick loadtesting and to see how server performs under given load, artillery will be sufficient. Artillery doesn't support websocket responses yet. For load testing scenarios based on websocket responses, Jmeter or tsung can be used.&lt;/p&gt;&lt;/div&gt;</description><category>devops</category><category>load-testing</category><guid>http://avilpage.com/2018/09/guide-to-load-testing-websockets.html</guid><pubDate>Mon, 24 Sep 2018 08:51:21 GMT</pubDate></item></channel></rss>