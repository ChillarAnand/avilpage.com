<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Avil Page (Posts about frappe-framework)</title><link>http://avilpage.com/</link><description></description><atom:link href="http://avilpage.com/tags/frappe-framework.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><lastBuildDate>Mon, 25 Jul 2022 08:29:41 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Twilio Integration With Frappe Framework</title><link>http://avilpage.com/2022/05/twilio-frappe.html</link><dc:creator>Chillar Anand</dc:creator><description>&lt;p&gt;Frappe&lt;sup id="fnref:frappe"&gt;&lt;a class="footnote-ref" href="http://avilpage.com/2022/05/twilio-frappe.html#fn:frappe"&gt;1&lt;/a&gt;&lt;/sup&gt; is a low code framework for rapidly developing web applications. Twilio&lt;sup id="fnref:twilio"&gt;&lt;a class="footnote-ref" href="http://avilpage.com/2022/05/twilio-frappe.html#fn:twilio"&gt;2&lt;/a&gt;&lt;/sup&gt; is a SAAS platform for SMS, Video etc with APIs.&lt;/p&gt;
&lt;p&gt;In this post, lets see how to setup Twilio Integration with Frappe.&lt;/p&gt;
&lt;h4&gt;Sending SMS&lt;/h4&gt;
&lt;p&gt;Frappe has inbuilt SMS manager&lt;sup id="fnref:sms"&gt;&lt;a class="footnote-ref" href="http://avilpage.com/2022/05/twilio-frappe.html#fn:sms"&gt;3&lt;/a&gt;&lt;/sup&gt; where users can confgiure SMS gateway and send SMS to mobiles directly.&lt;/p&gt;
&lt;p&gt;To send out messages/SMS with Twilio, we just need to configure Twilio API keys in SMS settings.&lt;/p&gt;
&lt;p&gt;First, create an account in Twilio and collect the following information from the account.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Twilio account SID&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gateway URL&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Auth Token&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;"From" Phone number&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These details need to be added to SMS settings in the following format.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/frappe-twilio.png"&gt;&lt;/p&gt;
&lt;p&gt;For &lt;code&gt;authorization&lt;/code&gt; parameter, we need to enter base64 encoded value of &lt;code&gt;account_sid:auth_token&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Once these values are set, we can go to SMS Center and send out dummy messages to ensure all settings are configured properly.&lt;/p&gt;
&lt;h4&gt;Twilio App&lt;/h4&gt;
&lt;p&gt;If we want to manage incoming/outgoing voice calls or send messages via WhatsApp, we need to install &lt;code&gt;twilio-integration&lt;/code&gt;&lt;sup id="fnref:tl"&gt;&lt;a class="footnote-ref" href="http://avilpage.com/2022/05/twilio-frappe.html#fn:tl"&gt;4&lt;/a&gt;&lt;/sup&gt; app. We can install the app on our site by running the following commands.&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;bench get-app https://github.com/frappe/twilio-integration.git
bench --site example.com install-app twilio_integration
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Once the app is installed, we can go to &lt;code&gt;Twilio Settings&lt;/code&gt; and configure the keys as shown below.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/twilio-settings.png"&gt;&lt;/p&gt;
&lt;p&gt;After that we can setup &lt;code&gt;Voice Call Settings&lt;/code&gt; to manage incoming/outgoing calls.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/twilio-voice.png"&gt;&lt;/p&gt;
&lt;p&gt;To send messages via Whatsapp, we can set the channel as &lt;code&gt;Whatsapp&lt;/code&gt; in Notification doctype.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/twilio-whatsapp.png"&gt;&lt;/p&gt;
&lt;p&gt;This is how we can send SMS, Whatsapp messages &amp;amp; manage calls via Twilio using Frappe Framework.&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:frappe"&gt;
&lt;p&gt;&lt;a href="https://github.com/frappe/frappe"&gt;https://github.com/frappe/frappe&lt;/a&gt; &lt;a class="footnote-backref" href="http://avilpage.com/2022/05/twilio-frappe.html#fnref:frappe" title="Jump back to footnote 1 in the text"&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:twilio"&gt;
&lt;p&gt;&lt;a href="https://www.twilio.com"&gt;https://www.twilio.com&lt;/a&gt; &lt;a class="footnote-backref" href="http://avilpage.com/2022/05/twilio-frappe.html#fnref:twilio" title="Jump back to footnote 2 in the text"&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:sms"&gt;
&lt;p&gt;&lt;a href="https://docs.erpnext.com/docs/v13/user/manual/en/setting-up/sms-setting"&gt;https://docs.erpnext.com/docs/v13/user/manual/en/setting-up/sms-setting&lt;/a&gt; &lt;a class="footnote-backref" href="http://avilpage.com/2022/05/twilio-frappe.html#fnref:sms" title="Jump back to footnote 3 in the text"&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:tl"&gt;
&lt;p&gt;&lt;a href="https://github.com/frappe/twilio-integration"&gt;https://github.com/frappe/twilio-integration&lt;/a&gt; &lt;a class="footnote-backref" href="http://avilpage.com/2022/05/twilio-frappe.html#fnref:tl" title="Jump back to footnote 4 in the text"&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description><category>frappe-framework</category><guid>http://avilpage.com/2022/05/twilio-frappe.html</guid><pubDate>Thu, 30 Jun 2022 06:16:02 GMT</pubDate></item><item><title>Adding Fuzzy Search To Frappe Framework</title><link>http://avilpage.com/2022/03/fuzzy-search-frappe-framework.html</link><dc:creator>Chillar Anand</dc:creator><description>&lt;h4&gt;Introduction&lt;/h4&gt;
&lt;p&gt;As software developers, we use fuzzy search a lot especially when using Emacs or any other editors/IDEs. For example to search a file called &lt;code&gt;patient_history.js&lt;/code&gt;, in the editor, we can just type &lt;code&gt;pah&lt;/code&gt; and editor will narrow it down.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/frappe-fuzzy-search-1.png"&gt;&lt;/p&gt;
&lt;p&gt;This is quite handy as we can open any file with just few characters.&lt;/p&gt;
&lt;p&gt;FF is a low code, open source, web framework in Python and Javascript. All sites built with FF will have a global search bar(aka awesome bar) as shown below. Here, we can search for doctypes, reports, pages etc.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/frappe-fuzzy-search-2.png"&gt;&lt;/p&gt;
&lt;p&gt;To open &lt;code&gt;Patient History&lt;/code&gt;, we have to type almost the entire text in search bar. If we type &lt;code&gt;pah&lt;/code&gt; like we have typed in the editor, it won't show any results.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/frappe-fuzzy-search-3.png"&gt;&lt;/p&gt;
&lt;p&gt;Instead, we can add fuzzy search here so that we can search for any item with just a frew key strokes.&lt;/p&gt;
&lt;h4&gt;Fuzzy Search&lt;/h4&gt;
&lt;p&gt;There are many third party packages which implement fuzzy search in programming languages. However we can't use any of these fuzzy search packages directly. These editors internally use a scoring algorithm to rank the results and display results based on score.&lt;/p&gt;
&lt;p&gt;It internally considers many factors mentioned below for scoring.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Matched letters&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CamelCase letters&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;snake_case letters&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Consecutive matching letters&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We can come up with a scoring mechanism for these factors and based on the matches, we can rank the results. I have implemented a custom fuzzy search alogirthm based on the above factors but it was slow and results were not good in some cases.&lt;/p&gt;
&lt;p&gt;Then I stumbled up this &lt;a href="https://github.com/forrestthewoods/lib_fts/blob/master/code/fts_fuzzy_match.js"&gt;fts_fuzzy_match&lt;/a&gt; implementation. This is a reverse engineered implementation of sublime text fuzzy search and it has a detailed scoring mechanism as well. It assigns negative ranking to mismatched letters and bonus points for consecutive matches.&lt;/p&gt;
&lt;p&gt;This works well and is as effective as most IDEs search. Now that there is a solid fuzzy search, all we need to do is hook this up in FF.&lt;/p&gt;
&lt;p&gt;FF internally has a fuzzy search function and we can directly hook it up here as shown here.&lt;/p&gt;
&lt;p&gt;After that, we can search for anything in just few key strokes. For example to open patient history, we can just type &lt;code&gt;pah&lt;/code&gt; and it will show results like this.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/frappe-fuzzy-search-4.png"&gt;&lt;/p&gt;
&lt;h4&gt;Conclusion&lt;/h4&gt;
&lt;p&gt;Fuzzy search in editors/IDEs is quite handy and when we bring to other places like FF or any other search bar, it improves search experience a lot.&lt;/p&gt;</description><category>frappe-framework</category><category>javascript</category><guid>http://avilpage.com/2022/03/fuzzy-search-frappe-framework.html</guid><pubDate>Thu, 31 Mar 2022 16:00:33 GMT</pubDate></item><item><title>Using Frappe Framework As An Integration Engine</title><link>http://avilpage.com/2022/02/frappe-framework-mirth.html</link><dc:creator>Chillar Anand</dc:creator><description>&lt;h4&gt;Introduction&lt;/h4&gt;
&lt;p&gt;In healthcare orgainsations, data exchange between systems is complicated and has interopolabilty issues. Integration engines are widely used in healthcare industry for bi-directional data transfer.&lt;/p&gt;
&lt;p&gt;In this article, let us look at the advantages of using interface engines and how Frappe Framework can be used as an interface engine.&lt;/p&gt;
&lt;h4&gt;Integration Engines&lt;/h4&gt;
&lt;p&gt;In a traditional agile development approach, building a new interface might take weeks/months. With an integration engine, a new interface can be replicated in a matter of hours with little or no scripting at all.&lt;/p&gt;
&lt;p&gt;Creating a REST API, listening to a webhook, transforming a data between channels, broadcasting a message, sending/receiving HL7 messages or any other commonly performed task can be implemented in integration engine without much effort.&lt;/p&gt;
&lt;p&gt;Due to this integration engines like &lt;a href="https://en.wikipedia.org/wiki/Mirth_Connect"&gt;Mirth Connect&lt;/a&gt; are widely used in healthcare.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/mirth-integration-engine.png"&gt;&lt;/p&gt;
&lt;p&gt;The above diagram shows usage of integration engine in a healthcare orgainsation.&lt;/p&gt;
&lt;h4&gt;Frappe Framework&lt;/h4&gt;
&lt;p&gt;Frappe Framework is a low code web application framework with batteries included. Even though Frappe is lablled as a framework, it can be used as an integration engine as well.&lt;/p&gt;
&lt;p&gt;It provides REST APIs out of the box for all the models(called doctypes in Frappe). Users can create custom APIs using &lt;a href="https://frappeframework.com/docs/v13/user/en/api/rest"&gt;server scripts&lt;/a&gt; and it has support for webhooks as well.&lt;/p&gt;
&lt;p&gt;Users can schedule custom cron jobs, setup emails, enable data transformations and other tasks without much coding.&lt;/p&gt;
&lt;p&gt;One feature Frappe Framework lacks when compared to integration engines is sending/receiving HL7 messages on ad-hoc ports. This feature is not available out of the box. Users need to develop a custom app or use any 3rd party app for it.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/frappe/healthcare"&gt;Frappe Healthcare&lt;/a&gt; is an HIS(Healthcare Information System) built on top of Frappe/ERPNext. If a hospital is using Frappe Healthcare, then there won't be a need to use integration engine as Frappe framework can take care of most of these things.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://avilpage.com/images/frappe-his.png"&gt;&lt;/p&gt;
&lt;p&gt;The above diagram shows usage of Frappe Healthcare as HIS in a healthcare orgainsation.&lt;/p&gt;
&lt;h4&gt;Conclusion&lt;/h4&gt;
&lt;p&gt;In healthcare, integration engines are used extensively to tackle data exchange between systems. Due to its low-code development and batteries included approach, even though Frappe is a web application framework, it can be used as an integration engine as well.&lt;/p&gt;</description><category>frappe-framework</category><category>HealthIT</category><guid>http://avilpage.com/2022/02/frappe-framework-mirth.html</guid><pubDate>Mon, 28 Feb 2022 16:01:40 GMT</pubDate></item></channel></rss>