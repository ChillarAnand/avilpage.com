<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Avil Page - Personal &amp; tech blog by Chillar Anand">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Avil Page (old posts, page 9) | Avil Page</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../rss.xml">
<link rel="canonical" href="https://avilpage.com/blog/index-9.html">
<link rel="prev" href="index-10.html" type="text/html">
<link rel="next" href="index-8.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><style>

 h1 {
     font-weight: bold;
     font-size: 25px;
 }

</style>
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

    <!-- Menubar -->
    <nav class="navbar navbar-expand-md static-top mb-4
                navbar-dark
                bg-dark
                "><div class="container">
<!-- This keeps the margins nice -->
            <a class="navbar-brand" href="../">

                    <span id="blog-title">Avil Page</span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="bs-navbar">
                <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../top-10.html" class="nav-link">Top 10</a>
                </li>
<li class="nav-item">
<a href="../archive.html" class="nav-link">Articles</a>
                </li>
<li class="nav-item">
<a href="../p/projects.html" class="nav-link">Projects</a>
                </li>
<li class="nav-item">
<a href="../rss.xml" class="nav-link">RSS</a>

                    
                </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
        </div>
<!-- /.container -->
    </nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="row justify-content-md-center">
        <div class="body-content col col-lg-6">
            <!--Body content-->
            
    
    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/12/the-meaning-of-life.html" class="u-url">What Is The Meaning Of Life?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/12/the-meaning-of-life.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-12-25T18:29:23Z" itemprop="datePublished" title="2016-12-25">2016-12-25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The meaning of life is</p>
<blockquote cite="https://en.oxforddictionaries.com/definition/life">

the condition that distinguishes animals and plants from inorganic matter, including the capacity for growth, reproduction, functional activity, and continual change preceding death.

</blockquote>

<p>Source: Oxford Dictionary</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/11/detect-correct-skew-images-python.html" class="u-url">Detect &amp; Correct Skew In Images Using Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/11/detect-correct-skew-images-python.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-11-12T12:11:17Z" itemprop="datePublished" title="2016-11-12">2016-11-12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When scanning a document, a slight skew gets into the scanned image. If you are using the scanned image to extract information from it, detecting and correcting skew is crucial.</p>
<p>There are several techniques that are used to skew correction.</p>
<ul>
<li>
<p>Projection profile method</p>
</li>
<li>
<p>Hough transform</p>
</li>
<li>
<p>Topline method</p>
</li>
<li>
<p>Scanline method</p>
</li>
</ul>
<p>However, projection profile method is the simplest and easiest way to determine skew in documents in the range ±5°. Lets take a part of scanned image and see how to correct skew.</p>
<p>In this method, we will convert image to black (absence of pixel) &amp; white (presence of pixel). Now image is projected vertically to get a histogram of pixels. Now image is rotated at various angles and above process is repeated. Wherver we find maximum diffrence between peaks, that will be the best angle.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="k">as</span> <span class="n">im</span>
<span class="kn">from</span> <span class="nn">scipy.ndimage</span> <span class="kn">import</span> <span class="n">interpolation</span> <span class="k">as</span> <span class="n">inter</span>

<span class="n">input_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>

<span class="c1"># convert to binary</span>
<span class="n">wd</span><span class="p">,</span> <span class="n">ht</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
<span class="n">pix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">'1'</span><span class="p">)</span><span class="o">.</span><span class="n">getdata</span><span class="p">(),</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">bin_img</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">pix</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">ht</span><span class="p">,</span> <span class="n">wd</span><span class="p">))</span> <span class="o">/</span> <span class="mf">255.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">bin_img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">'binary.png'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">find_score</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">inter</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">reshape</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">hist</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">hist</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hist</span><span class="p">,</span> <span class="n">score</span>


<span class="n">delta</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="n">limit</span><span class="p">,</span> <span class="n">limit</span><span class="o">+</span><span class="n">delta</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
<span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">angle</span> <span class="ow">in</span> <span class="n">angles</span><span class="p">:</span>
    <span class="n">hist</span><span class="p">,</span> <span class="n">score</span> <span class="o">=</span> <span class="n">find_score</span><span class="p">(</span><span class="n">bin_img</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>

<span class="n">best_score</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
<span class="n">best_angle</span> <span class="o">=</span> <span class="n">angles</span><span class="p">[</span><span class="n">scores</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">best_score</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Best angle: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">formate</span><span class="p">(</span><span class="n">best_angle</span><span class="p">))</span>

<span class="c1"># correct skew</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">inter</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">bin_img</span><span class="p">,</span> <span class="n">best_angle</span><span class="p">,</span> <span class="n">reshape</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">fromarray</span><span class="p">((</span><span class="mi">255</span> <span class="o">*</span> <span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">"uint8"</span><span class="p">))</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">"RGB"</span><span class="p">)</span>
<span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">'skew_corrected.png'</span><span class="p">)</span>
</pre></div>

<p><strong>Results:</strong></p>
<p align="center"><img align="center" src="../skew_python/original.png"></p>
<p align="center">Original Image</p>
<hr>
<p align="center"><img align="center" src="../skew_python/gray.png"></p>
<p align="center">Black &amp; white image</p>
<hr>
<p align="center"><img align="center" src="../skew_python/hist_0.png"></p>
<p align="center">Histogram of image</p>
<hr>
<p align="center"><img align="center" src="../skew_python/hist_scores.png"></p>
<p align="center">Scores at various angles</p>
<hr>
<p align="center"><img align="center" src="../skew_python/hist_best.png"></p>
<p align="center">Histogram at 2° (best angle)</p>
<hr>
<p align="center"><img align="center" src="../skew_python/skew_corrected.png"></p>
<p align="center">Skew corrected image</p>

<p>Here we have done only one iteration to find best angle. To get better accuracy, we can search over at (2 ± 0.5)°. This process can be repeated until we find a suitable level of accuracy.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/10/why-use-cyanogenmod.html" class="u-url">Why I Use CyanogenMod?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/10/why-use-cyanogenmod.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-10-31T14:05:09Z" itemprop="datePublished" title="2016-10-31">2016-10-31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When listening to music, to switch tracks I want to use volume buttons. For this I have to use <a href="https://play.google.com/store/apps/details?id=com.silentlexx.volbtntrackctrl&amp;hl=en">Pocket Skip Track</a> app.
CyanogenMod has inbuilt support for that.</p>
<p>To interact with mobile from computer over wifi, <a href="https://play.google.com/store/apps/details?id=com.ttxapps.wifiadb">wifi adb</a> is required. CyanogenMod provides an option to enable this in <code>Developer Options</code>.</p>
<p>To put mobile in recovery mode, <a href="http://repo.xposed.info/module/com.ceco.kitkat.gravitybox">Gravity Box</a> is required. This should be used only after installing Xposed framework. CyanogenMod has <code>Advanced reboot</code> which provides option to put phone in recovery mode.</p>
<p>Battery icon in status bar is very small. Having a text percentage indicator will be more useful. For this <a href="https://play.google.com/store/apps/details?id=de.kroegerama.android4batpercent">battery percentage</a> is required.
CyanogenMod has inbuilt circle/text indicators.</p>
<p>Auto brighness stopped working after I have rooted Moto G4 plus. I had to use <a href="https://play.google.com/store/apps/details?id=com.urbandroid.lux">twilight</a> for auto brighness adjustment. With CyanogenMod, it is working fine. It also has a night mode option.</p>
<p>With stock android, auto rotate won't work in all directions. <a href="https://play.google.com/store/apps/details?id=com.googlecode.eyesfree.setorientation">Set orientation</a> app is required for that. CyanogenMod has inbuilt support for that.</p>
<p>To adapt mobile display to the time of the day, flux app is required on stock android. CyanogenMod has inbuilt option for this.</p>
<p>To get superuser permissions, I have to root stock android. CyanogenMod comes with root permissions. To run <code>adb</code> as root on stock android, <code>adbd insecure</code> app is required. CyanogenMod works without it.</p>
<p>Stock android also doesn't provide any options to customize status bar. CyanogenMod has several options to customize it.</p>
<p>There are several other things where CyanogenMod excels when compared to stock android like themes, privacy guard e.t.c. However, CyanogenMod comes with a lot of inbuilt features(batteries included) and that is the main reason for me to use it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/09/remove-clock-lock-screen-status-bar-android.html" class="u-url">Remove Clock From LockScreen/StatusBar On Android</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/09/remove-clock-lock-screen-status-bar-android.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-09-15T13:24:38Z" itemprop="datePublished" title="2016-09-15">2016-09-15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have been living without time from a few years and it is a bliss. I have removed time from my laptop. For android mobile, I couldn't find a reliable way to remove time and I used to change timezone to a random zone. With Xposed framework we can remove clock from lock screen and status bar.</p>
<p>Before proceeding, make sure your phone is <a href="http://www.xda-developers.com/root/">rooted</a> and <a href="http://repo.xposed.info/module/de.robv.android.xposed.installer">Xposed framework</a> is installed.</p>
<h4>Remove Clock From LockScreen</h4>
<p>To remove clock from lockscreen, download <a href="http://repo.xposed.info/module/com.ssrdroide.lockscreenwidgets">Lock screen widgets</a> module and activate it.</p>
<p>If you open it, it has an option to hide date and time.</p>
<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_0.png" height="400px" width="220"></p>

<h4>Remove Time From StatusBar</h4>
<p>To remove clock from status bar, you have to install <a href="http://repo.xposed.info/module/com.ceco.marshmallow.gravitybox">GravityBox</a>. Open GravityBox and goto statusbar settings</p>
<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_3.png" height="400px" width="220"></p>

<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_4.png" height="400px" width="220"></p>

<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_5.png" height="400px" width="220"></p>

<p>If you are already using CyanogenMod, there is an option to hide time in settings.</p>
<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_1.png" height="400px" width="220"></p>

<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_2.png" height="400px" width="220"></p>

<p>Once you do this, you will have a neat lockscreen without any time on it.</p>
<p align="center">
<img src="../remove_clock_android/remove_clock_anrdoid_6.png" height="400px" width="220"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/09/detecting-device-events-in-ubuntu-with-python.html" class="u-url">Detecting USB Events In Ubuntu With Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/09/detecting-device-events-in-ubuntu-with-python.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-09-02T13:24:38Z" itemprop="datePublished" title="2016-09-02">2016-09-02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><a href="https://en.wikipedia.org/wiki/Udev">udev</a> is responsible for managing devices on Linux. It provides <code>udevadm</code>, a CLI utility to monitor and control devices.</p>
<p>If we run <code>udevadm monitor</code> on terminal and connect a USB drive or hard disk or a mobile via USB to your computer, it will show that kernel has detected the device and it will send a signal to udev about it.</p>
<div class="code"><pre class="code literal-block">→ udevadm monitor
monitor will print the received events <span class="k">for</span>:
UDEV - the event which udev sends out after rule processing
KERNEL - the kernel uevent

KERNEL<span class="o">[</span><span class="m">4336</span>.899091<span class="o">]</span> add      /devices/pci0000:00/0000:00:14.0/usb1/1-2 <span class="o">(</span>usb<span class="o">)</span>
KERNEL<span class="o">[</span><span class="m">4336</span>.899774<span class="o">]</span> add      /devices/pci0000:00/0000:00:14.0/usb1/1-2/1-2:1.0 <span class="o">(</span>usb<span class="o">)</span>
KERNEL<span class="o">[</span><span class="m">4336</span>.902553<span class="o">]</span> add      /devices/pci0000:00/0000:00:14.0/usb1/1-2/1-2:1.1 <span class="o">(</span>usb<span class="o">)</span>
UDEV  <span class="o">[</span><span class="m">4336</span>.911201<span class="o">]</span> add      /devices/pci0000:00/0000:00:14.0/usb1/1-2 <span class="o">(</span>usb<span class="o">)</span>
UDEV  <span class="o">[</span><span class="m">4336</span>.936453<span class="o">]</span> add      /devices/pci0000:00/0000:00:14.0/usb1/1-2/1-2:1.1 <span class="o">(</span>usb<span class="o">)</span>
UDEV  <span class="o">[</span><span class="m">4337</span>.947174<span class="o">]</span> add      /devices/pci0000:00/0000:00:14.0/usb1/1-2/1-2:1.0 <span class="o">(</span>usb<span class="o">)</span>
</pre></div>

<p><a href="https://pypi.python.org/pypi/pyudev">Pyudev</a>, a third party package provides python bindings for udev. It can be installed with <code>pip install pyudev</code>.</p>
<p>With this we can create a simple monitor to detect USB events.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">pyudev</span>

<span class="n">context</span> <span class="o">=</span> <span class="n">pyudev</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">pyudev</span><span class="o">.</span><span class="n">Monitor</span><span class="o">.</span><span class="n">from_netlink</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<span class="n">monitor</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">subsystem</span><span class="o">=</span><span class="s1">'usb'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">monitor</span><span class="o">.</span><span class="n">poll</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s1">'add'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> connected'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
        <span class="c1"># do something</span>
</pre></div>

<p>Save this to a file say monitor.py and run it with <code>python monitor.py</code> and connect a mobile or pendrive and it will show something like this.</p>
<div class="code"><pre class="code literal-block">Device<span class="o">(</span><span class="s1">'/sys/devices/pci0000:00/0000:00:14.0/usb1/1-6/1-6:1.0'</span><span class="o">)</span> connected
Device<span class="o">(</span><span class="s1">'/sys/devices/pci0000:00/0000:00:14.0/usb1/1-1/1-1:1.0'</span><span class="o">)</span> connected
</pre></div>

<p>Here we are just detecting <code>add</code> event. Similary we can detect other events like <code>delete</code>.</p>
<p>This is useful for automatically running shell scripts once the device gets plugged or unplugged.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/08/migrate-from-blogger-to-static-site-nikola.html" class="u-url">Migrate From Blogger To Static Site (Nikola)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/08/migrate-from-blogger-to-static-site-nikola.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-08-07T11:32:15Z" itemprop="datePublished" title="2016-08-07">2016-08-07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Long back I have started this blog on <a href="https://blogger.com">blogger</a> platform. Now I choose to migrate to a static because of limitations of blogger.</p>
<p>Blogger has a simple editor in browser to write posts in html. With static site, you can write post in your editor in markdown and keep them in version control system like git.</p>
<p>Jekyll, Pelican, Lektor were my initial choices for static site generators. Unfortunately, they didn't had any useful plugins for smooth migration of data from blogger. Then I stumbled across <a href="https://plugins.getnikola.com/#import_blogger">import_blogger</a> plugin of <a href="https://getnikola.com">Nikola</a> and it is able to migrate text content, images without any issues. So, I decided to use Nikola.</p>
<p><a href="https://getnikola.com">Nikola</a> has great documentation and setup was simpler. I used <code>import_blogger</code> plugin and imported all the data. All the posts and pages were working well with exact same urls.</p>
<p>Blogger tags all posts of particular label under <code>/search/label/foo</code>. I have used these urls in some posts. Nikola shows posts under <code>/categories/foo.html</code>.</p>
<p>This is where nikola <code>REDIRECTIONS</code> come in handy. Using this, a list of from &amp; to urls can be mapped. I wrote a simple function for redirections and then enabled <code>STRIP_INDEXES</code> which removes trailing <code>.html</code>.</p>
<div class="code"><pre class="code literal-block"><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'python'</span><span class="p">,</span> <span class="s1">'emacs'</span><span class="p">,</span> <span class="s1">'zen'</span><span class="p">,</span> <span class="s1">'django'</span><span class="p">,</span> <span class="s1">'chrome'</span><span class="p">]</span>
<span class="n">LABEL_REDIRECTIONS</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">:</span>
    <span class="n">LABEL_REDIRECTIONS</span><span class="o">.</span><span class="n">append</span><span class="p">((</span>
        <span class="s1">'/search/label/</span><span class="si">{}</span><span class="s1">/index.html'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">),</span>
        <span class="s1">'/categories/</span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">),</span>
    <span class="p">))</span>
</pre></div>

<p>Since I stripped <code>.html</code> from urls, old urls broke. So I generated a list of old urls and wrote another function to redirect them to new urls.</p>
<p>Nikola has few builtin themes. I wanted something minimalistic and so I rolled out custom theme which you are seeing right now.</p>
<p>Thanks to <a href="https://github.com/punchagan">Puneeth Chaganti</a>, <a href="https://github.com/Kwpolska">Chris Warrick</a>, <a href="https://github.com/ralsina">Roberto Alsina</a> for helping me with migration.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/07/emblem-mode-for-emacs.html" class="u-url">emblem-mode for Emacs</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/07/emblem-mode-for-emacs.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-07-25T17:32:35Z" itemprop="datePublished" title="2016-07-25">2016-07-25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Emblem.js is a ember friendly templating engine used as an alternative for handlebars.js.</p>
<p>Emblem.js doesn't have any official plugins for emacs. However they recommend to use slim plugins as they are similar.</p>
<p><code>slim-mode</code> is available on melpa. To install it, run</p>
<div class="code"><pre class="code literal-block">M-x install-package slim-mode
</pre></div>

<p>After installing it, activate <code>slim-mode</code> by running <code>M-x slim-mode</code>.</p>
<p>Instead of activating manually, <code>auto-mode-alist</code> can be used to set major modes that needs to activated for files with specific extension. To activate slim-mode for emblem files which will be ending with <code>.em</code> or <code>.emblem</code>, use</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="ss">'auto-mode-alist</span><span class="w"> </span><span class="o">'</span><span class="p">(</span><span class="s">"\\.\\(em\\|emblem\\)"</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">slim-mode</span><span class="p">))</span><span class="w"></span>
</pre></div>

<p>By adding this line to emacs configuration file, slim-mode gets activated for emblem.js files.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/06/auto-completion-for-custom-search.html" class="u-url">Auto Completion For Custom Search Engines In Chrome</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/06/auto-completion-for-custom-search.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-06-11T17:37:00+05:30" itemprop="datePublished" title="2016-06-11">2016-06-11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div dir="ltr" style="text-align: left;" trbidi="on">
    <div dir="ltr" style="text-align: left;" trbidi="on">
      <span style="font-size: 16px; font-weight: normal; line-height: 25.6px;">If we have to search for a video on YouTube or a product on Amazon, we will open
      up that site first and then we will search for it.</span>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <a href="https://cloud.githubusercontent.com/assets/4463796/15986478/89999bda-3026-11e6-9460-9b0c2d4db4d9.png" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;" target="_blank"><img alt="Chrome-custom-search-autocompletion1" src="https://cloud.githubusercontent.com/assets/4463796/15986478/89999bda-3026-11e6-9460-9b0c2d4db4d9.png" style="border: 0px; box-sizing: border-box; max-width: 100%;"></a>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    To avoid this, Chrome allows us to search using custom search engines without visiting the site first. In chrome search settings, we can assign a single
    letter to a custom search engine.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <a href="https://cloud.githubusercontent.com/assets/4463796/15986479/899a642a-3026-11e6-8084-beddf28bf8d6.png" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;" target="_blank"><img alt="Chrome-custom-search-autocompletion1" src="https://cloud.githubusercontent.com/assets/4463796/15986479/899a642a-3026-11e6-8084-beddf28bf8d6.png" style="border: 0px; box-sizing: border-box; max-width: 100%;"></a>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    Now if we go to browser, type <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">y</code> and
    hit <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">Tab</code>,
    it prompts for YouTube search instead of default search.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <a href="https://cloud.githubusercontent.com/assets/4463796/15986476/89951240-3026-11e6-99ad-cc8cf9127605.png" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;" target="_blank"><img alt="Chrome-custom-search-autocompletion1" src="https://cloud.githubusercontent.com/assets/4463796/15986476/89951240-3026-11e6-99ad-cc8cf9127605.png" style="border: 0px; box-sizing: border-box; max-width: 100%;"></a>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    This is handy. But the major problem with this approach is there won't be autocompletion in chrome address bar.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    This is where vimium comes into picture. Vimium provides auto completion for custom search engines.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    You can install it <a href="https://chrome.google.com/webstore/detail/dbepggeogbaibhgnhhndojpepiihcmeb" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">from chrome webstore</a>. Once it is installed, go to Vimium options and
    add youtube search to custom search engines.
    </div>
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; overflow: auto; padding: 16px; word-wrap: normal;">

<code style="background: transparent; border-radius: 3px; border: 0px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; max-width: initial; overflow: initial; padding: 0px; word-break: normal; word-wrap: normal;">y: http://www.youtube.com/results?search_query=%s Youtube<br></code>
</pre>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    Also add a custom key map for this search.
    </div>
    <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; color: #333333; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; overflow: auto; padding: 16px; word-wrap: normal;">

<code style="background: transparent; border-radius: 3px; border: 0px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; max-width: initial; overflow: initial; padding: 0px; word-break: normal; word-wrap: normal;">map y Vomnibar.activateInNewTab keyword=y<br></code>
</pre>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    If we just press <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">y</code>,
    it open youtube custom search with autocompletion.
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
    <a href="https://cloud.githubusercontent.com/assets/4463796/15986477/8996f3e4-3026-11e6-8c83-8a74f0ab84fb.png" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;" target="_blank"><img alt="Chrome-custom-search-autocompletion1" src="https://cloud.githubusercontent.com/assets/4463796/15986477/8996f3e4-3026-11e6-8c83-8a74f0ab84fb.png" style="border: 0px; box-sizing: border-box; max-width: 100%;"></a>
    </div>

    <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
        Now in every page, we have autocompletion for custom search engines.<br><br>
      More articles about <a href="../search/label/chrome/">Chrome</a>.

    </div>
  </div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/05/concurrent-downloads-bash-vs-python.html" class="u-url">Concurrent Downloads - Bash Vs Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/05/concurrent-downloads-bash-vs-python.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-05-29T17:25:00+05:30" itemprop="datePublished" title="2016-05-29">2016-05-29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div dir="ltr" style="text-align: left;" trbidi="on">
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                I just found one more free telugu book <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">Graded
      readings in modern literary Telugu</code> by Golla Narayanaswami Reddy and Dan M Matson in <a href="http://dsal.uchicago.edu/digbooks/dig_toc.html?BOOKID=PL4775.R4_1967" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">Digital South Asia Library</a>.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                Unfortunately they didn't provide it as an ebook but as a set of 221 tif images.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                I wrote a simple for loop in shell which downloaded all images one by one using <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">wget</code>.
            </div>
            <div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">
      $ base_url=<span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">"</span>http://dsal.uchicago.edu<span class="pl-pds" style="box-sizing: border-box;">"</span></span><br>$ url=<span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">"</span><span class="pl-smi" style="box-sizing: border-box; color: #333333;">$base_url</span>/digbooks/images/PL4775.R4_1967/PL4775.R4_1967_%03g.gif<span class="pl-pds" style="box-sizing: border-box;">"</span></span><br>$ <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">time</span> -p sh -c <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>for i in $(seq -f $url 1 221); do; wget $i; done;<span class="pl-pds" style="box-sizing: border-box;">'</span></span></pre>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                I took 375 seconds for that. This was too slow. So I tried to download them parallelly using xargs.
            </div>
            <div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">
      $ <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">time</span> <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">echo</span> <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">$(</span>seq -f <span class="pl-smi" style="box-sizing: border-box; color: #333333;">$url</span> 1 221<span class="pl-pds" style="box-sizing: border-box;">)</span></span> <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">|</span> xargs -n 1 -P 36 wget</pre>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                My laptop has a quad core processor. So I tried with 20, 24, 28, 32 process at a time.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                With <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">wget+xargs</code>,
                the best timing is 13 seconds (CPU: 15%, Process: 28).
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                Again I tried downloading them parallelly but with GNU parallel.
            </div>
            <div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">
      $ <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">time</span> seq -f <span class="pl-smi" style="box-sizing: border-box;">$url</span> 1 221 <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">|</span> parallel -j36 wget {}</pre>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                With <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">wget+parallel</code>,
                the best timing is 12 seconds (CPU: 48%, Process: 24).
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                Here is cpu consumption and time taken at each step.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <a href="https://cloud.githubusercontent.com/assets/4463796/15634659/08965d50-25e7-11e6-9f3e-02fe008997a1.png" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;" target="_blank"><img alt="paralle_python_bash2" src="https://cloud.githubusercontent.com/assets/4463796/15634659/08965d50-25e7-11e6-9f3e-02fe008997a1.png" style="border: 0px; box-sizing: border-box; max-width: 100%;"></a>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                Once I have done with bash, I decided to try the same things with Python and see how it goes.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                I wrote a simple script using requests to download images.
            </div>
            <div class="highlight highlight-source-python" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">
                    <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> shutil<br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> sys<br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">from</span> concurrent <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> futures<br><br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">import</span> requests<br><br><br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">def</span> <span class="pl-en" style="box-sizing: border-box; color: #795da3;">download_image</span>(<span class="pl-smi" style="box-sizing: border-box;">url</span>):<br>    r <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> requests.get(url)<br>    file_name <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> url.split(<span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>/<span class="pl-pds" style="box-sizing: border-box;">'</span></span>)[<span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">-</span><span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">1</span>]<br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">with</span> <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">open</span>(file_name, <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>wb<span class="pl-pds" style="box-sizing: border-box;">'</span></span>) <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">as</span> fh:<br>        fh.write(r.content)<br><br><br>base_url <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>http://dsal.uchicago.edu<span class="pl-pds" style="box-sizing: border-box;">'</span></span><br>book_url <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> base_url <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">+</span> <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>/digbooks/images/PL4775.R4_1967/PL4775.R4_1967_<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">{}</span>.gif<span class="pl-pds" style="box-sizing: border-box;">'</span></span><br>urls <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> [book_url.format(<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">str</span>(i).zfill(<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">3</span>)) <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">for</span> i <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">in</span> <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">range</span>(<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">1</span>, <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">221</span>)]<br><br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">def</span> <span class="pl-en" style="box-sizing: border-box; color: #795da3;">download_serially</span>():<br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">for</span> url <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">in</span> urls:<br>        download_image(url)<br><br>download_serially()</pre>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                This took 244 seconds.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                To download images parallelly, I have used <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">Threadpoolexecutor</code> from <a href="https://docs.python.org/3.5/library/concurrent.futures.html" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">concurrent module</a>.
            </div>
            <div class="highlight highlight-source-python" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">
                    <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">def</span> <span class="pl-en" style="box-sizing: border-box; color: #795da3;">download_parallely</span>():<br>    workers <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">int</span>(sys.argv[<span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">1</span>])<br><br><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">with</span> futures.ThreadPoolExecutor(<span class="pl-v" style="box-sizing: border-box; color: #ed6a43;">max_workers</span><span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span>workers) <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">as</span> executor:<br>        result <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">=</span> executor.map(download_image, urls)<br><br>download_parallely()</pre>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                I used previous script but just added one more function which queues tasks. Then I have executed the script with several options.
            </div>
            <div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">
      $ <span class="pl-k" style="box-sizing: border-box; color: #a71d5d;">time</span> python down.py 28</pre>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                Threadpoolexecutor documentation uses 5 times number of processors as max_workers by default. I tried same options which I have used for bash. Here is
                the overall comparision.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                With <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">requests+ThreadPoolExecutor</code>,
                the best timing is 12 seconds (CPU: 36%, Process: 28).
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                Here is the overall comparision.
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <a href="https://cloud.githubusercontent.com/assets/4463796/15634653/edadbb50-25e6-11e6-8f59-c908ca7d65b2.png" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;" target="_blank"><img alt="paralle_python_bash" src="https://cloud.githubusercontent.com/assets/4463796/15634653/edadbb50-25e6-11e6-8f59-c908ca7d65b2.png" style="border: 0px; box-sizing: border-box; max-width: 100%;"></a>
            </div>
            <div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
                <span style="line-height: 25.6px;">For a simple concurrent download, xargs+wget seems to be the best option.</span>
            </div>
        </div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="../2016/04/emacs-browsing-projects-with-etags.html" class="u-url">Emacs - Browsing Projects With Etags</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="../2016/04/emacs-browsing-projects-with-etags.html" rel="bookmark">
            <time class="published dt-published" datetime="2016-04-17T16:11:00+05:30" itemprop="datePublished" title="2016-04-17">2016-04-17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div dir="ltr" style="text-align: left;" trbidi="on">
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">A tag is a reference to a sub unit in a program. A tag references syntactic elements like functions, classes e.t.c. A tags table consists of list of tag names and their positions in corresponding files.</div>
<h4 style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 1.25em; line-height: 1.4; margin-bottom: 16px; margin-top: 1em; position: relative;">
<a aria-hidden="true" class="anchor" href="http://localhost:6419/#creating-tags-table" id="user-content-creating-tags-table" style="box-sizing: border-box; color: #4078c0; cursor: pointer; display: block; left: 0px; line-height: 1.2; margin-left: -30px; padding-left: 30px; padding-right: 6px; position: absolute; text-decoration: none; top: 0px;"></a>Creating Tags Table</h4>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">A tags table can be generated by <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Create-Tags-Table.html" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">etags</a> program. If you are using Ubuntu machine, you can install it with</div>
<div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;"><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">sudo apt-get install exuberant-ctags</pre></div>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">Now, you can generate tags for a file with</div>
<div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;"><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">etags input_file</pre></div>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">Depending on the project, we can also generate tags for a particular type. For example, we can generate tags for all python files using</div>
<div class="highlight highlight-source-shell" style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;"><pre style="background-color: #f7f7f7; border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; overflow: auto; padding: 16px; word-break: normal; word-wrap: normal;">find <span class="pl-c1" style="box-sizing: border-box; color: #0086b3;">.</span> -name <span class="pl-s" style="box-sizing: border-box; color: #183691;"><span class="pl-pds" style="box-sizing: border-box;">'</span>*.py<span class="pl-pds" style="box-sizing: border-box;">'</span></span> -exec etags -a {} <span class="pl-cce" style="box-sizing: border-box;">\;</span></pre></div>
<h4 style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 1.25em; line-height: 1.4; margin-bottom: 16px; margin-top: 1em; position: relative;">
<a aria-hidden="true" class="anchor" href="http://localhost:6419/#browsing-tags" id="user-content-browsing-tags" style="box-sizing: border-box; color: #4078c0; cursor: pointer; display: block; left: 0px; line-height: 1.2; margin-left: -30px; padding-left: 30px; padding-right: 6px; position: absolute; text-decoration: none; top: 0px;"></a>Browsing Tags</h4>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">This tag tables enables you to jump to definition of any tag. You can place cursor on a tag and press<code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">M-.</code>(find-tag) which takes you to definition of that tag. If you want to go back to previous location, you can use <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">M-*</code>(pop-tag -mark). There are <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Find-Tag.html#Find-Tag" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">several functions</a> which help to navigate tags.</div>
<h4 style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 1.25em; line-height: 1.4; margin-bottom: 16px; margin-top: 1em; position: relative;">
<a aria-hidden="true" class="anchor" href="http://localhost:6419/#tips" id="user-content-tips" style="box-sizing: border-box; color: #4078c0; cursor: pointer; display: block; left: 0px; line-height: 1.2; margin-left: -30px; padding-left: 30px; padding-right: 6px; position: absolute; text-decoration: none; top: 0px;"></a>Tips</h4>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">
<a href="https://github.com/jixiuf/helm-etags-plus" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">ctags-update</a> is a third party package which automatically updates TAGS file when new files are created.</div>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">In addition to them, helm provides a function called <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">helm-semantic</code> which shows all available tags in the current file. This works without TAGS file. Helm also has <code style="background-color: rgba(0, 0, 0, 0.0392157); border-radius: 3px; box-sizing: border-box; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; padding: 0.2em 0px;">helm-etags-select</code> which provides helm interface to select tags.</div>
<div style="box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 25.6px; margin-bottom: 16px;">If you are working with a python projects, you can use <a href="https://github.com/jorgenschaefer/elpy" style="box-sizing: border-box; color: #4078c0; cursor: pointer; text-decoration: none;">elpy</a> which navigates tags (using Jedi in the backend) without any TAGS file.</div>
<h1 style="border-bottom-color: rgb(238, 238, 238); border-bottom-style: solid; border-bottom-width: 1px; box-sizing: border-box; color: #333333; font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 2.25em; line-height: 1.2; margin: 1em 0px 16px; padding-bottom: 0.3em; position: relative;"><a aria-hidden="true" class="anchor" href="http://localhost:6419/#adding-attributes-to-django-forms" id="user-content-adding-attributes-to-django-forms" style="box-sizing: border-box; color: #4078c0; cursor: pointer; display: block; left: 0px; line-height: 1; margin-left: -30px; padding-left: 30px; padding-right: 6px; position: absolute; text-decoration: none; top: 0px;"></a></h1>
</div>
    </div>
    </article>
</div>
        <ul class="pager postindexpager clearfix">
<li class="previous"><a href="index-10.html" rel="prev">Newer posts</a></li>
            <li class="next"><a href="index-8.html" rel="next">Older posts</a></li>
        </ul>
<!--End of body content--><footer id="footer">
                Contents © 2022         <a href="mailto:">Chillar Anand</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
                
            </footer>
</div>
    </div>
    </div>

                <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/popper.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
