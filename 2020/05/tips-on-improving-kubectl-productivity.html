<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="How to improve your productivity with kubectl from any shell and using some k8s specific tools.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tips On Improving kubectl Productivity | Avil Page</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/bootblog.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="http://avilpage.com/2020/05/tips-on-improving-kubectl-productivity.html">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Chillar Anand">
<link rel="prev" href="../04/setup-continuous-deployment-with-kubernetes.html" title="Continuous Deployment To Kubernetes With Skaffold" type="text/html">
<link rel="next" href="../06/how-dart-flutter-hot-reload-work-part-1.html" title="How Dart, Flutter Stateful Hot Reload Work? - Part 1" type="text/html">
<meta property="og:site_name" content="Avil Page">
<meta property="og:title" content="Tips On Improving kubectl Productivity">
<meta property="og:url" content="http://avilpage.com/2020/05/tips-on-improving-kubectl-productivity.html">
<meta property="og:description" content="How to improve your productivity with kubectl from any shell and using some k8s specific tools.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-05-31T18:42:00+05:30">
<meta property="article:tag" content="devops">
<meta property="article:tag" content="kubenetes">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../">

            <span id="blog-title">Avil Page</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="tips-on-improving-kubectl-productivity.md" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../" class="nav-link">Articles</a>
                </li>
<li class="nav-item">
<a href="../../p/talks.html" class="nav-link">Talks</a>
                </li>
<li class="nav-item">
<a href="../../p/projects.html" class="nav-link">Projects</a>
                </li>
<li class="nav-item">
<a href="../../p/pages.html" class="nav-link">Pages</a>
                </li>
<li class="nav-item">
<a href="../../p/about.html" class="nav-link">About</a>
                </li>
<li class="nav-item">
<a href="https://forms.gle/Hre4z4aLqJA5zYWe6" class="nav-link">Contact</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Tips On Improving kubectl Productivity</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Chillar Anand
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2020-05-31T18:42:00+05:30" itemprop="datePublished" title="2020-05-31">2020-05-31</time></a>
            </p>
            
        <p class="sourceline"><a href="tips-on-improving-kubectl-productivity.md" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><code>kubectl</code> is CLI tool to control Kubernetes clusters. As we start using kubectl to interact with mutliple clusters, we end up running lengthy commands and even running multiple commands for simple tasks like running a shell in a container.</p>
<p>In this article, lets learn few tips to improve our productivity when using kubectl.</p>
<h4>Aliases</h4>
<p>Aliases in general improve the productivity when using a shell.</p>
<p>kubectl provides shortcuts for commands. For example,</p>
<div class="code"><pre class="code literal-block"><span class="c1"># instead of running full command</span>
$ kubectl get services

<span class="c1"># we can use short hand version</span>
$ kubectl get svc
</pre></div>

<p>It also provides completion for commands.</p>
<div class="code"><pre class="code literal-block"><span class="c1"># enable completion for zsh</span>
$ <span class="nb">source</span> &lt;<span class="o">(</span>kubectl completion zsh<span class="o">)</span>

<span class="c1"># type `kubectl ` and hit `&lt;TAB&gt;` will show possible options</span>
$ kubectl
annotate       attach         cluster-info
api-resources  auth           completion
api-versions   autoscale      config
apply          certificate    convert

<span class="c1"># type `kubectl g`, and hit `&lt;TAB&gt;` will show possible options</span>
$ kubectl get
</pre></div>

<p>However, setup up aliases for most commanly used commands will lot of time.</p>
<div class="code"><pre class="code literal-block"><span class="nb">alias</span> <span class="nv">k</span><span class="o">=</span><span class="s1">'kubectl'</span>

<span class="nb">alias</span> <span class="nv">kdp</span><span class="o">=</span><span class="s1">'kubectl describe pod'</span>
<span class="nb">alias</span> <span class="nv">kgp</span><span class="o">=</span><span class="s1">'kubectl get pods'</span>
<span class="nb">alias</span> <span class="nv">kgpa</span><span class="o">=</span><span class="s1">'kubectl get pods --all-namespaces'</span>
<span class="nb">alias</span> <span class="nv">ket</span><span class="o">=</span><span class="s1">'kubectl exec -it'</span>
<span class="nb">alias</span> <span class="nv">wkgp</span><span class="o">=</span><span class="s1">'watch -n1 kubectl getp pods'</span>

<span class="nb">alias</span> <span class="nv">kga</span><span class="o">=</span><span class="s1">'kubectl get all'</span>
<span class="nb">alias</span> <span class="nv">kgaa</span><span class="o">=</span><span class="s1">'kubectl get all --all-namespaces'</span>

<span class="nb">alias</span> <span class="nv">kaf</span><span class="o">=</span><span class="s1">'kubectl apply -f'</span>

<span class="nb">alias</span> <span class="nv">kcgc</span><span class="o">=</span><span class="s1">'kubectl config get-contexts'</span>
<span class="nb">alias</span> <span class="nv">kccc</span><span class="o">=</span><span class="s1">'kubectl config current-context'</span>
</pre></div>

<p>If you don't write your own aliases, there is <a href="https://github.com/ahmetb/kubectl-aliases">kubectl-aliases</a> which provides exhuastive list of aliases. We can source this file in rc file and start using them.</p>
<h4>Use Functions</h4>
<p>Even though aliases help us to run lengthy commands with an alias, there are times where we have to run multiple commands to get things done for a single task.</p>
<p>For example, to view kubenetes dashboard, we have to get the token, start proxy server and then open the url in browser. We can write a simple function as shown below to do all of that.</p>
<div class="code"><pre class="code literal-block">kp<span class="o">()</span> <span class="o">{</span>
    kubectl -n kubernetes-dashboard describe secret <span class="k">$(</span>kubectl -n kubernetes-dashboard get secret <span class="p">|</span> grep admin-user <span class="p">|</span> awk <span class="s1">'{print $1}'</span><span class="k">)</span> <span class="p">|</span> grep <span class="s1">'token:'</span> <span class="p">|</span> awk <span class="s1">'{print $2}'</span> <span class="p">|</span> pbcopy
    open http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
    kubectl proxy
<span class="o">}</span>
</pre></div>

<p>Now from the shell, when we run <code>kp</code>, it function will copy the token to clipboard, open kubernetes dashboard in browser and will start the proxy server.</p>
<h4>Use Labels</h4>
<p>To describe a pod or tail logs from a pod, we can use pod names.</p>
<div class="code"><pre class="code literal-block">$ kubectl get pods
NAME                             READY   STATUS
hello-world-79d794c659-tpfv2     <span class="m">1</span>/1     Running


$ kubectl describe pod hello-world-79d794c659-tpfv2

$ kubectl logs -f pod/hello-world-79d794c659-tpfv2
</pre></div>

<p>When the app gets updated, the name of pod also updates. So, instead of using pod name, we can use pod labels.</p>
<div class="code"><pre class="code literal-block">$ kubectl describe pod -l<span class="o">=</span>hello-world

$ kubectl logs -f -l<span class="o">=</span>pod/hello-world
</pre></div>

<h4>Kubectl Tools</h4>
<p>k8s has a good ecosystem and the following packages are aimed to make certain k8s tasks easier.</p>
<p><a href="https://github.com/aylei/kubectl-debug">kubectl-debug</a> - Debug pod by a new container with all troubleshooting tools pre-installed.</p>
<p><a href="https://github.com/pixel-point/kube-forwarder">kube-forwarder</a> - Easy to use port forwarding manager.</p>
<p><a href="https://github.com/wercker/stern">stern</a> - Multi pod and container log tailing.</p>
<p><a href="https://github.com/ahmetb/kubectx">kubectx</a> - Quick way to switch between clusters and namespaces.</p>
<p><a href="https://github.com/astefanutti/kubebox">kubebox</a> - Terminal and Web console for Kubernetes.</p>
<p><a href="https://github.com/derailed/k9s">k9s</a> - Interactive terminal UI.</p>
<p><a href="https://github.com/IBM/kui">kui</a> - Hybrid CLI/UI tool for k8s.</p>
<p><a href="https://github.com/databricks/click">click</a> - Interactive controller for k8s.</p>
<p><a href="https://github.com/lensapp/lens">lens</a> - Stand alone corss platform k8s IDE.</p>
<h4>Conclusion</h4>
<p>In this article we have seen some useful methods as well as some tools to improve productivity with kubectl. If you spend a lot of time interacting with kubernetes cluster, it is important to notice your workflows and find better tools or ways to improve productivity.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/devops.html" rel="tag">devops</a></li>
            <li><a class="tag p-category" href="../../tags/kubenetes.html" rel="tag">kubenetes</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../04/setup-continuous-deployment-with-kubernetes.html" rel="prev" title="Continuous Deployment To Kubernetes With Skaffold">Previous post</a>
            </li>
            <li class="next">
                <a href="../06/how-dart-flutter-hot-reload-work-part-1.html" rel="next" title="How Dart, Flutter Stateful Hot Reload Work? - Part 1">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2022         <a href="mailto:">Chillar Anand</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/popper.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
