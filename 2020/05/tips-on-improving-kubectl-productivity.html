<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="How to improve your productivity with kubectl from any shell and using some k8s specific tools.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tips On Improving kubectl Productivity | Avil Page</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://avilpage.com/2020/05/tips-on-improving-kubectl-productivity.html">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Chillar Anand">
<link rel="prev" href="../04/setup-continuous-deployment-with-kubernetes.html" title="Continuous Deployment To Kubernetes With Skaffold" type="text/html">
<link rel="next" href="../06/how-dart-flutter-hot-reload-work-part-1.html" title="How Dart, Flutter Stateful Hot Reload Work? - Part 1" type="text/html">
<meta property="og:site_name" content="Avil Page">
<meta property="og:title" content="Tips On Improving kubectl Productivity">
<meta property="og:url" content="https://avilpage.com/2020/05/tips-on-improving-kubectl-productivity.html">
<meta property="og:description" content="How to improve your productivity with kubectl from any shell and using some k8s specific tools.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-05-31T18:42:00+05:30">
<meta property="article:tag" content="devops">
<meta property="article:tag" content="kubernetes">
<style>
    .full-article-footer {
    border-top: 1px solid #E0DFDB;
}


.article-footer {
    padding: 20px 10px 10px 10px;
    min-height: 115px;
    display:table;
}


.avatar-module {
    display: table-cell;
    vertical-align: middle;
}


.avatar-module img {
    border-radius: 50%!important;
    height: 120px;
    width: 120px;
    float: left;
    margin:0px 20px 0px 20px;
}


.article-footer p {
    line-height:1.5em;
    padding-left:15px;
}


@media (max-width:750px) {
    .article-footer {
        display:inherit;
        margin:0px;
    }

    .avatar-module {
        display:inherit;
        vertical-align: none;
    }

    .avatar-module img {
        margin-left: auto;
        margin-right: auto;
        display: block;
        float:none;
        margin-top:0px;
    }

    .article-footer p {
        text-align:center;
        padding-left:0px;
    }
}

    </style>
<style>

 h1 {
     font-weight: bold;
     font-size: 25px;
 }

</style>
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

    <!-- Menubar -->
    <nav class="navbar navbar-expand-md static-top mb-4
                navbar-dark
                bg-dark
                "><div class="container">
<!-- This keeps the margins nice -->
            <a class="navbar-brand" href="../../">

                    <span id="blog-title">Avil Page</span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="bs-navbar">
                <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../top-10.html" class="nav-link">Top 10</a>
                </li>
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Articles</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS</a>

                    
                </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
        </div>
<!-- /.container -->
    </nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="row justify-content-md-center">
        <div class="body-content col col-lg-6">
            <!--Body content-->
            
    <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Tips On Improving kubectl Productivity</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card">
                <span class="byline-name fn p-name" itemprop="author">
                    Chillar Anand
                </span>
            </p>

            <p class="dateline">
                    7 min read
            </p>

            <p class="dateline">
                <a href="#" rel="bookmark">
                    <time class="published dt-published" datetime="2020-05-31T18:42:00+05:30" itemprop="datePublished" title="2020-05-31">2020-05-31</time></a>
            </p>
            
        </div>

        
    </header><div class="e-content entry-content" itemprop="articleBody text">
            <p><code>kubectl</code> is CLI tool to control Kubernetes clusters. As we start using kubectl to interact with mutliple clusters, we end up running lengthy commands and even running multiple commands for simple tasks like running a shell in a container.</p>
<p>In this article, lets learn few tips to improve our productivity when using kubectl.</p>
<h4>Aliases</h4>
<p>Aliases in general improve the productivity when using a shell.</p>
<p>kubectl provides shortcuts for commands. For example,</p>
<div class="code"><pre class="code literal-block"><span class="c1"># instead of running full command</span>
$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>services

<span class="c1"># we can use short hand version</span>
$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>svc
</pre></div>

<p>It also provides completion for commands.</p>
<div class="code"><pre class="code literal-block"><span class="c1"># enable completion for zsh</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>&lt;<span class="o">(</span>kubectl<span class="w"> </span>completion<span class="w"> </span>zsh<span class="o">)</span>

<span class="c1"># type `kubectl ` and hit `&lt;TAB&gt;` will show possible options</span>
$<span class="w"> </span>kubectl
annotate<span class="w">       </span>attach<span class="w">         </span>cluster-info
api-resources<span class="w">  </span>auth<span class="w">           </span>completion
api-versions<span class="w">   </span>autoscale<span class="w">      </span>config
apply<span class="w">          </span>certificate<span class="w">    </span>convert

<span class="c1"># type `kubectl g`, and hit `&lt;TAB&gt;` will show possible options</span>
$<span class="w"> </span>kubectl<span class="w"> </span>get
</pre></div>

<p>Even though completions are helpful, setting up up aliases for most commanly used commands will save a lot of time.</p>
<div class="code"><pre class="code literal-block"><span class="nb">alias</span><span class="w"> </span><span class="nv">k</span><span class="o">=</span><span class="s1">'kubectl'</span>

<span class="nb">alias</span><span class="w"> </span><span class="nv">kdp</span><span class="o">=</span><span class="s1">'kubectl describe pod'</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">kgp</span><span class="o">=</span><span class="s1">'kubectl get pods'</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">kgpa</span><span class="o">=</span><span class="s1">'kubectl get pods --all-namespaces'</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">ket</span><span class="o">=</span><span class="s1">'kubectl exec -it'</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">wkgp</span><span class="o">=</span><span class="s1">'watch -n1 kubectl getp pods'</span>

<span class="nb">alias</span><span class="w"> </span><span class="nv">kga</span><span class="o">=</span><span class="s1">'kubectl get all'</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">kgaa</span><span class="o">=</span><span class="s1">'kubectl get all --all-namespaces'</span>

<span class="nb">alias</span><span class="w"> </span><span class="nv">kaf</span><span class="o">=</span><span class="s1">'kubectl apply -f'</span>

<span class="nb">alias</span><span class="w"> </span><span class="nv">kcgc</span><span class="o">=</span><span class="s1">'kubectl config get-contexts'</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">kccc</span><span class="o">=</span><span class="s1">'kubectl config current-context'</span>
</pre></div>

<p>If you don't write your own aliases, there is <a href="https://github.com/ahmetb/kubectl-aliases">kubectl-aliases</a> which provides exhuastive list of aliases. We can source this file in rc file and start using them.</p>
<h4>Use Functions</h4>
<p>Even though aliases help us to run lengthy commands with an alias, there are times where we have to run multiple commands to get things done for a single task.</p>
<p>For example, to view kubenetes dashboard, we have to get the token, start proxy server and then open the url in browser. We can write a simple function as shown below to do all of that.</p>
<div class="code"><pre class="code literal-block">kp<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>describe<span class="w"> </span>secret<span class="w"> </span><span class="k">$(</span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>admin-user<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'{print $1}'</span><span class="k">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">'token:'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'{print $2}'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>pbcopy
<span class="w">    </span>open<span class="w"> </span>http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
<span class="w">    </span>kubectl<span class="w"> </span>proxy
<span class="o">}</span>
</pre></div>

<p>Now from the shell, when we run <code>kp</code>, it function will copy the token to clipboard, open kubernetes dashboard in browser and will start the proxy server.</p>
<h4>Use Labels</h4>
<p>To describe a pod or tail logs from a pod, we can use pod names.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods
NAME<span class="w">                             </span>READY<span class="w">   </span>STATUS
hello-world-79d794c659-tpfv2<span class="w">     </span><span class="m">1</span>/1<span class="w">     </span>Running


$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>hello-world-79d794c659-tpfv2

$<span class="w"> </span>kubectl<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>pod/hello-world-79d794c659-tpfv2
</pre></div>

<p>When the app gets updated, the name of pod also updates. If your shell has auto completion feature, it will autocomplete to previous name.</p>
<p>So, instead of using pod name, we can use pod labels as mentioned below.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>-l<span class="o">=</span>hello-world

$<span class="w"> </span>kubectl<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>-l<span class="o">=</span>pod/hello-world
</pre></div>

<p>We run the command once and next time shell will show autocomplete and we can use that directly.</p>
<h4>Kubectl Tools</h4>
<p>k8s has a good ecosystem and the following packages are aimed to make certain k8s tasks easier.</p>
<p><a href="https://github.com/aylei/kubectl-debug">kubectl-debug</a> - Debug pod by a new container with all troubleshooting tools pre-installed.</p>
<p><a href="https://github.com/pixel-point/kube-forwarder">kube-forwarder</a> - Easy to use port forwarding manager.</p>
<p><a href="https://github.com/wercker/stern">stern</a> - Multi pod and container log tailing.</p>
<p><a href="https://github.com/ahmetb/kubectx">kubectx</a> - Quick way to switch between clusters and namespaces.</p>
<p><a href="https://github.com/astefanutti/kubebox">kubebox</a> - Terminal and Web console for Kubernetes.</p>
<p><a href="https://github.com/derailed/k9s">k9s</a> - Interactive terminal UI.</p>
<p><a href="https://github.com/IBM/kui">kui</a> - Hybrid CLI/UI tool for k8s.</p>
<p><a href="https://github.com/databricks/click">click</a> - Interactive controller for k8s.</p>
<p><a href="https://github.com/lensapp/lens">lens</a> - Stand alone corss platform k8s IDE.</p>
<h4>Conclusion</h4>
<p>In this article we have seen some useful methods as well as some tools to improve productivity with kubectl. If you spend a lot of time interacting with kubernetes cluster, it is important to notice your workflows and find better tools or ways to improve productivity.</p>
        </div>
        <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/devops.html" rel="tag">devops</a></li>
            <li><a class="tag p-category" href="../../tags/kubernetes.html" rel="tag">kubernetes</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../04/setup-continuous-deployment-with-kubernetes.html" rel="prev" title="Continuous Deployment To Kubernetes With Skaffold">Previous post</a>
            </li>
            <li class="next">
                <a href="../06/how-dart-flutter-hot-reload-work-part-1.html" rel="next" title="How Dart, Flutter Stateful Hot Reload Work? - Part 1">Next post</a>
            </li>
        </ul></nav></aside><div class="full-article-footer">
            <div class="article-footer">

                <div class="avatar-module">
                    <img class="avatar" height="100px" src="../../images/chillaranand.jpg">
</div>

                <p class="avatar-module">
                    <b>Chillar Anand</b>
                    <br>
                    A blog about python, careers &amp; life.
                    <br>
                    To contact me, <a href="https://forms.gle/Hre4z4aLqJA5zYWe6">send a message here</a>.
                </p>

            </div>
        </div>

        
    </article><!--End of body content--><footer id="footer"><div class="container align-items-center justify-content-center d-flex">

<footer class="footer"><a href="https://github.com/ChillarAnand">
<img src="../../images/icons8-github.svg" alt="github-chillar-anand" height="34"></a>

  

<a href="https://stackoverflow.com/users/2698552/chillar-anand">
<img src="../../images/icons8-so.svg" alt="github-chillar-anand" height="30"></a>

  

<a href="https://youtube.com/@avilpage">
<img src="../../images/icons8-youtube.svg" alt="github-chillar-anand" height="34"></a>

  

<a href="https://linkedin.com/in/chillaranand">
<img src="../../images/icons8-linkedin.svg" alt="github-chillar-anand" height="34"></a>

  

<a href="https://twitter.com/chillaranand">
<img src="../../images/icons8-twitter.svg" alt="github-chillar-anand" height="34"></a>

</footer>
</div>

<br><br></footer>
</div>
    </div>
    </div>

                <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/popper.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
