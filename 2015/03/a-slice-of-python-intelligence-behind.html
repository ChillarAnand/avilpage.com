<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="author" content="Chillar Anand">
<title>A Slice of Python - The Intelligence Behind Python Slices! | Avil Page</title>
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/style.css" rel="stylesheet" type="text/css">
<link rel="canonical" href="http://www.avilpage.com/2015/03/a-slice-of-python-intelligence-behind.html">
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
</head>
<body>
        <div id="">
            <div id="container">
                <!-- <h1 id="blog-title">
                     <a href="http://www.avilpage.com/" title="Avil Page" rel="home">Avil Page</a>
                     </h1> -->



    <div class="postbox">


        <article class="postbox post-text"><div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
                    <h1 class="p-name" itemprop="headline name">A Slice of Python - The Intelligence Behind Python Slices!</h1>

                <hr>
<div class="e-content" itemprop="articleBody text">
                    <div dir="ltr" style="text-align: left;" trbidi="on">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.1/gist-embed.min.js" type="text/javascript"></script><br><div dir="ltr" style="text-align: left;" trbidi="on">I attended attended <a href="http://www.meetup.com/BangPypers/events/177630452/" target="_blank">Python Gotchas workshop</a> by <a href="https://twitter.com/skeptichacker" target="_blank">Anand B. Pillai</a>. He showed a lot of gotchas with Python. During gotchas with lists, he showed this.<br><br><code data-gist-file="1.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="2abf4ecc6066bbc6b22a"></code>Also let us consider some other cases.<br><br><code data-gist-file="7.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="2abf4ecc6066bbc6b22a"></code> If we look at above cases, we can see that indexing works within the range of length of object, otherwise it throws error. On the other hand, slicing returns an empty list instead of throwing error. Also slicing intelligently figures out missing parameters.<br><br>This post shows basics of slicing &amp; some other interesting things about slicing.<br><br><br><h3 style="text-align: left;">Slicing Is NOT Indexing:</h3>
<div><br></div>
<div>
<a href="https://wiki.python.org/moin/MovingToPythonFromOtherLanguages" target="_blank">Wiki Python</a> has this amazing picture which clearly distinguishes indexing and slicing.</div>
<div><br></div>
<div>
<div class="separator" style="clear: both; text-align: center;"></div>
<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-K6RrYmwPtA8/VQ6pajsmvFI/AAAAAAAANtg/jxYu0IvY56w/s1600/slices-python.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-K6RrYmwPtA8/VQ6pajsmvFI/AAAAAAAANtg/jxYu0IvY56w/s1600/slices-python.png" height="163" width="400"></a></div>
<br>It is a list with 6 elements in it. To understand slicing better, consider that list as a set of six boxes placed together. Each box has an alphabet in it.</div>
<div>
<br>Indexing is like dealing with the contents of box. You can check contents of any box. But You can't check contents of multiple boxes at once. You can even replace contents of the box. But You can't place 2 balls in 1 box or replace 2 balls at a time.<br><br><code data-gist-file="2.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="2abf4ecc6066bbc6b22a"></code> <br>Slicing is like dealing with boxes itself. You can pickup first box and place it on another table. To pickup the box all You need to know is the position of beginning  &amp; ending of the box.<br><br>You can even pickup first 3 boxes or last 2 boxes or all boxes between 1 &amp; 4. So, You can pick any set of boxes if You know beginning &amp; ending. This positions are called start &amp; stop positions.<br><br>The interesting thing is that You can replace multiple boxes at once. Also You can place multiple boxes where ever You like.<br><br><code data-gist-file="3.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-highlight-line="9,14" data-gist-id="2abf4ecc6066bbc6b22a"></code> <br><h3 style="text-align: left;">Slicing With Step:</h3>
<div><br></div>Till now You have picked boxes continuously. But some times You need to pickup discretely. For example You can pickup every second box. You can even pickup every third box from the end. This value is called step size. This represents the gap between Your successive pickups. The step size should be positive if You are picking boxes from the beginning to end and vice versa.<br><br><code data-gist-file="4.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="2abf4ecc6066bbc6b22a"></code> </div>
<br><h3>How Python Figures Out Missing Parameters:</h3>
<div>
<br>When slicing if You leave out any parameter, Python tries to figure it out automatically.<br><br>If You check source code of CPython, You will find a function called <a href="https://github.com/python/cpython/blob/f7bfa54898598a0da46fdb1e0436d5f9e04c9007/Objects/sliceobject.c#L192" target="_blank">PySlice_GetIndicesEx</a> which figures out indices to a slice for any given parameters. Here is the logical equivalent code in Python.<br><br>This function takes a Python object &amp; optional parameters for slicing and returns start, stop, step &amp; slice length for the requested slice.<br><br><code data-gist-file="5.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="2abf4ecc6066bbc6b22a"></code>This is the intelligence that is present behind slices. Since Python has inbuilt function called slice, You can pass some parameters &amp; check how smartly it calculates missing parameters.<br><br><code data-gist-file="6.py" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="2abf4ecc6066bbc6b22a"></code> <br>As You know basics of slicing, You can start tweaking with it or You can write Your own custom slicer!<br><br>If You find any mistake with above function, feel free to <a href="https://gist.github.com/ChillarAnand/2abf4ecc6066bbc6b22a#file-5-py" target="_blank">update it</a>.<br><br><h3 style="text-align: left;">References:</h3>
<br>Wiki Python: <a href="https://wiki.python.org/moin/">https://wiki.python.org/moin/</a><br>CPython repo: <a href="https://github.com/python/cpython">https://github.com/python/cpython</a><br>Slice on SO: <a href="http://stackoverflow.com/questions/509211/explain-pythons-slice-notation">http://stackoverflow.com/questions/509211/explain-pythons-slice-notation</a><br>Docs for slice: <a href="https://docs.python.org/3.4/library/functions.html#slice">https://docs.python.org/3.4/library/functions.html#slice</a><br>Python/C API for slice: <a href="https://docs.python.org/3.4/c-api/slice.html">https://docs.python.org/3.4/c-api/slice.html</a><br><br>Thanks to <a href="https://twitter.com/skeptichacker" target="_blank">Anand B. Pillai</a> &amp; <a href="https://twitter.com/kracetheking" target="_blank">Krace Kumar</a> for the meetup &amp; encouraging to checkout Python source code.<br><br><br><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px;">Read more </span><a href="http://www.avilpage.com/search/label/python" style="background-color: white; color: #5421bb; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px; text-decoration: none;">articles about Python</a><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px;">!</span>
</div>
</div>
</div>
                </div>
            </div>

            <hr>
<a href="../../">
                <h2>See all articles</h2>
            </a>

            <a href="../../rss.xml">
                <h3>RSS</h3>
            </a>


        </article>
</div>


                <br>
</div>


            <!--Sidebar content-->
            <!-- <ul class="unstyled">
                     

                                 <li><a href="/">Articles</a>
                <li><a href="/about">About.html</a>
                <li><a href="/rss.xml">RSS</a>

                 </ul> -->
            <br>
</div>
    </body>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                             m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-81644162-1', 'auto');
    ga('send', 'pageview');

    </script>
</html>
