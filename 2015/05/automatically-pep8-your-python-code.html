<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Automatically PEP8 &amp; Format Your Python Code | Avil Page</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<!-- <link href="/assets/css/rst_base.css" rel="stylesheet" type="text/css"> --><link href="../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/style.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/carbon.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://avilpage.com/2015/05/automatically-pep8-your-python-code.html">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Chillar Anand">
<link rel="prev" href="whats-so-good-about-django-traceback.html" title="Whats So Good About Django Traceback?" type="text/html">
<link rel="next" href="../06/git-etiquette-meaningful-messages.html" title="Git Etiquette: Meaningful Messages &amp; Linear Logs!" type="text/html">
<meta property="og:site_name" content="Avil Page">
<meta property="og:title" content="Automatically PEP8 &amp; Format Your Python Code">
<meta property="og:url" content="http://avilpage.com/2015/05/automatically-pep8-your-python-code.html">
<meta property="og:description" content="Even if you don't intend anybody else to read your code, there's still a very good chance that somebody will have to stare at your code and figure out what it does: That person is probably going to be">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-05-23T19:14:00+05:30">
<meta property="article:tag" content="emacs">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://avilpage.com/">

                <span id="blog-title">Avil Page</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../">Articles</a>
                </li>
<li>
<a href="../../p/talks.html">Talks</a>
                </li>
<li>
<a href="../../p/projects.html">Projects</a>
                </li>
<li>
<a href="../../p/about.html">About</a>
                </li>
<li>
<a href="../../rss.xml">RSS</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
            <a href="automatically-pep8-your-python-code.src.html" id="sourcelink">Source</a>
        </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content col-lg-6 col-lg-offset-3 col-xs-12 col-md-12">
        <!--Body content-->
        <div class="row">
            
    <article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Automatically PEP8 &amp; Format Your Python Code</a></h1>

        <div class="metadata">
            <p class="dateline">
                <time class="published dt-published" datetime="2015-05-23T19:14:00+05:30" itemprop="datePublished" title="23 May 15">23 May 2015</time></p>
            |
            

        9 min read


        </div>
        
    </header><hr>
<div class="e-content entry-content" itemprop="articleBody text">
            <div dir="ltr" style="text-align: left;" trbidi="on">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script><script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.1/gist-embed.min.js" type="text/javascript"></script><br><div dir="ltr" style="text-align: left;" trbidi="on"><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">Even if you don't intend anybody else to read your code, there's still a very good chance that somebody will have to stare at your code and <br>figure out what it does: That person is probably going to be you, <br>twelve months from now<span style="font-size: xx-small;">[1]</span>.</pre></div>or as Zen of Python says "Readability Counts".<br><br><h3 style="text-align: left;">PEP8 Style Guide:</h3>Since code is read more than it is written, it is very important to make sure that the code is readable. Python has coding convetions(<a href="https://www.python.org/dev/peps/pep-0008/" target="_blank">PEP8 style guide</a>) to maintain consistency in code and thereby making it more readable.<br><br>There are lot of tools (like <a href="https://github.com/jcrocholl/pep8" target="_blank">pep8</a>, <a href="https://pypi.python.org/pypi/flake8" target="_blank">flake8</a>, <a href="http://www.pylint.org/" target="_blank">pylint</a>) to check if Your code is in compliance with PEP8. Today most of the IDE/text editors have plugins which check for these errors and report it on the fly. If You are writing code from scratch, You can make sure that You are following coding conventions.<br><br>However once in a while You have to read/bug-fix other people's code who don't follow these conventions(or You might even stumble across Your old piece of code). Once You are accustomed to style guide, it will be uneasy to read inconsistent code. Here is a badly formatted Python file opened in Emacs editor(with flymake &amp; flake8 configured)<br><br><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Kzv9OZt3MV0/VWC-mB4cjlI/AAAAAAAANvU/ZvHSC5aaAnw/s1600/auto-pep8.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="332" src="http://1.bp.blogspot.com/-Kzv9OZt3MV0/VWC-mB4cjlI/AAAAAAAANvU/ZvHSC5aaAnw/s640/auto-pep8.png" width="640"></a></div>
<div>
<br><h3 style="text-align: left;">Custom Style Guide:</h3>If You don't like any of PEP8 rules, You can set Your own style guide for Your project. Most developers find limiting line length to 79 characters annoying. So they set their own line limit. You can even configure PEP8 checkers to take You own guidelines and check the code according to it.<br><br>
</div>
<h3 style="text-align: left;">Auto PEP8:</h3>Formatting code to PEP8 style is boring &amp; time consuming process. So instead of manually formatting code, You can use <a href="https://pypi.python.org/pypi/autopep8/" target="_blank">autopep8</a> package which automatically formats Python code to conform to the PEP 8 style guide.<br><br>To install the package run<br><div dir="ltr" trbidi="on"><div dir="ltr" trbidi="on"><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">$ <span style="color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px;">pip install autopep8</span></pre></div></div>If You have a file foo.py as show above, You can run<br><div dir="ltr" trbidi="on"><div dir="ltr" trbidi="on"><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">$ autopep8 --in-place --aggressive --aggressive foo.py</pre></div></div>
<div class="separator" style="clear: both;">which neatly formats the file like this</div>
<div class="separator" style="clear: both; text-align: center;"><br></div>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wMseYjAAsp0/VWC-mHqkLkI/AAAAAAAANvY/hwOow-QGsxc/s1600/auto-pep8-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="561" src="http://1.bp.blogspot.com/-wMseYjAAsp0/VWC-mHqkLkI/AAAAAAAANvY/hwOow-QGsxc/s640/auto-pep8-2.png" width="640"></a></div>
<br><h3 style="text-align: left;">Emacs Integration:</h3>As emacs is extremely configurable editor, with just couple of lines of lisp, we can integrate autopep8 to emacs. Just find where autopep8 is installed; write a function which runs autopep8 on current buffer; bind a key to that function; set a hook, so that when ever You save a file, it will be automatically run the function.<br><br><code data-gist-file="autopep8.el" data-gist-hide-footer="true" data-gist-hide-line-numbers="true" data-gist-id="0e8c8351799cdd7254d7"></code>This works reasonably well. But I do recommend using <a href="https://github.com/jorgenschaefer/elpy" target="_blank">Elpy</a> for Python developemnt in emacs. I have just sent a <a href="https://github.com/jorgenschaefer/elpy/pull/571" target="_blank">pull request to integrate</a> autopep8 with elpy.<br><br><h3 style="text-align: left;">Formatting:</h3>
<div>PEP8 formatters like autopep8, pep8ify will remove only lint errors. But they can't beautify code. </div>
<div><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">little = more[3:   5]<br><br>x = {'a': 37, 'b': 42,<br>     'c': 927}<br></pre></div>
<div>Above code remains same after pep8ifying also. But the code doesn't look good yet. You can use formatters like <a href="https://pypi.python.org/pypi/yapf" target="_blank">yapf</a>, which will format the code even if the code is PEP8 compliant. </div>
<div>Above code will be formatted to </div>
<div><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">little = more[3:5]<br><br>x = {'a': 37, 'b': 42, 'c': 927}</pre></div>
<div>Some times this even destroys Your manual formatting. For example </div>
<div><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">BAZ = {<br>    [1, 2, 3, 4],<br>    [5, 6, 7, 8],<br>    [9, 10, 11, 12]<br>}</pre></div>
<div><div>will be converted to </div></div>
<div><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">BAZ = {[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]}</pre></div>
<div>But You can tell it to ignore some parts.</div>
<div><pre style="border-radius: 3px; border: 1px solid rgb(170, 204, 153); color: #333333; font-family: monospace, sans-serif; font-size: 15.4399995803833px; line-height: 18.5279998779297px; overflow-x: auto; overflow-y: hidden; padding: 5px;">BAZ = {<br>    [1, 2, 3, 4],<br>    [5, 6, 7, 8],<br>    [9, 10, 11, 12]<br>}  # yapf: disable</pre></div>
<div><div><br></div></div>
<h3 style="text-align: left;">Beyond PEP8:</h3>As we have learnt to auto PEP8 code, it is the time to look beyond PEP8. There is a good talk by Raymond Hettinger on that - <a href="https://www.youtube.com/watch?v=wf-BqAjZb8M" target="_blank">Beyond PEP8</a>, Best practices for beautiful intelligible code.<br><br>Let Machines take care of PEP8 &amp; Let Humans look Beyond PEP8.<br><br><h3 style="text-align: left;">References:</h3>[1] <a href="http://blogs.msdn.com/b/oldnewthing/archive/2007/04/06/2036150.aspx" target="_blank">Code is read much more often than it is written, so plan accordingly</a>.<br><a href="https://www.python.org/dev/peps/pep-0008/" target="_blank">Python - PEP8 style guide</a>.<br><a href="https://pypi.python.org/pypi/autopep8/" target="_blank">Autopep8 - formats Python code to conform to the PEP 8.</a><br><a href="https://pypi.python.org/pypi/pep8ify" target="_blank">PEP8ify - modifies python source code to conform to PEP8.</a><br><div><a href="https://pypi.python.org/pypi/yapf" target="_blank">yapf - A formatter for Python files.</a></div>
<div><a href="https://www.youtube.com/watch?v=wf-BqAjZb8M" target="_blank">Beyond PEP8 - Best practices for beautiful intelligible code.</a></div>
<a href="https://github.com/jorgenschaefer/elpy" target="_blank">Elpy, the Emacs Lisp Python Environment</a>.<br><br><br><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px;">Read more </span><a href="http://www.avilpage.com/search/label/python" style="background-color: white; color: #5421bb; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px; text-decoration: none;">articles about Python</a><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px;">!</span><br><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px;">Read more </span><a href="http://www.avilpage.com/search/label/emacs" style="background-color: white; color: #5421bb; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px; text-decoration: none;">articles about Emacs</a><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16.7999992370605px; line-height: 20.1599979400635px;">!</span><br><div><br></div>
</div>
        </div>
        <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/emacs.html" rel="tag">emacs</a></li>
            <li><a class="tag p-category" href="../../tags/python.html" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="whats-so-good-about-django-traceback.html" rel="prev" title="Whats So Good About Django Traceback?">Previous post</a>
            </li>
            <li class="next">
                <a href="../06/git-etiquette-meaningful-messages.html" rel="next" title="Git Etiquette: Meaningful Messages &amp; Linear Logs!">Next post</a>
            </li>
        </ul></nav></aside><div class="full-article-footer">
            <div class="article-footer">

                <div class="avatar-module">
                    <img class="avatar" height="100px" src="../../images/chillaranand.jpg">
</div>

                <p class="avatar-module">
                    Written by
                    <br><b>Chillar Anand</b>
                    <br>
                    Musings about programming, careers &amp; life.
                </p>

            </div>
        </div>

        <hr></article>
</div>
        <!--End of body content-->
        <div id="coral_thread"></div>

        <footer id="footer">
            Contents © 2020         <a href="mailto:">Chillar Anand</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>

            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script src="../../assets/js/moment-with-locales.min.js"></script><script src="../../assets/js/fancydates.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
        }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81644162-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-81644162-1');

    $(document.links).filter(function() {
        return this.hostname != window.location.hostname;
    }).attr('target', '_blank');
    </script><script>
    (function() {
        var d = document, s = d.createElement('script');
        var url = 'avilpage-coral.herokuapp.com';
        /*         var url = 'http://comments.avilpage.com'; */
        s.src = '//' + url + '/assets/js/embed.js';
        s.async = false;
        s.defer = true;
        s.onload = function() {
            Coral.createStreamEmbed({
                id: "coral_thread",
                autoRender: true,
                rootURL: '//' + url,
            });
        };
        (d.head || d.body).appendChild(s);
    })();
    </script>
</body>
</html>
